<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Or√ßamentos - Profissional</title>
    <style>
        :root {
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --bg-item: #1e2533;
            --input-bg: #111827;
            --primary: #3b82f6;
            --accent: #10b981;
            --text: #f8fafc;
            --text-dim: #94a3b8;
            --danger: #ef4444;
        }

        body {
            background-color: var(--bg-body);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            min-height: 100vh;
        }

        .container {
            display: flex;
            gap: 25px;
            max-width: 1200px;
            width: 100%;
            flex: 1;
        }

        .calculadora { flex: 2; }

        .section {
            background: var(--bg-card);
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        header {
            width: 100%;
            max-width: 1200px;
            display: flex;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #334155;
        }

        .header-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-img {
            height: 100px;
            width: auto;
        }

        h3 { margin: 0 0 15px 0; color: var(--text-dim); font-size: 1rem; }

        input[type="text"] {
            width: 100%;
            padding: 18px; 
            border-radius: 8px;
            border: 1px solid #334155;
            background: var(--input-bg);
            color: white;
            font-size: 1.3rem;
            box-sizing: border-box;
        }

        .item-linha {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--bg-item);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .servico-check {
            appearance: none;
            width: 28px;
            height: 28px;
            border: 2px solid #334155;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            background: var(--input-bg);
        }

        .servico-check:checked {
            background-color: var(--danger);
            border-color: var(--danger);
        }

        .servico-check:checked::after {
            content: '‚úî';
            position: absolute;
            color: white;
            font-size: 18px;
            left: 5px;
            top: 0px;
        }

        .label-preco { color: var(--accent); font-weight: 500; margin-left: 8px; }

        .controles { display: flex; align-items: center; gap: 12px; }
        .btn-qty {
            background: var(--danger); border: none; color: white;
            width: 32px; height: 32px; border-radius: 8px; cursor: pointer;
            font-weight: bold;
        }
        .btn-qty.plus { background: var(--accent); }
        .qty-val { width: 40px; text-align: center; background: transparent; border: none; color: white; font-size: 1.1rem; }

        .resumo {
            flex: 1;
            background: var(--bg-card);
            padding: 25px;
            border-radius: 12px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .resumo-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 18px;
            padding-bottom: 8px;
            border-bottom: 1px solid #334155;
        }

        .btn-parceria {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: none;
            background: #334155;
            color: white;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .btn-parceria.active { background: var(--primary); }

        .promo-tags { display: flex; gap: 8px; margin-top: 15px; }
        .tag {
            background: #334155; padding: 6px 12px; border-radius: 4px;
            font-size: 0.75rem; cursor: pointer; border: 1px solid transparent;
            color: var(--text-dim);
        }
        .tag.active { border-color: var(--primary); color: var(--primary); background: rgba(59, 130, 246, 0.1); }

        .total-valor { font-size: 2.2rem; color: var(--accent); font-weight: bold; margin-top: 5px; }

        footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-top: 1px solid #334155;
            color: var(--text-dim);
            font-size: 0.9rem;
            width: 100%;
            max-width: 1200px;
        }

        .dev-name {
            color: var(--accent);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>

<header>
    <div class="header-logo">
        <img src="logo_game.png" alt="Logo Rise Custom" class="logo-img">
    </div>
</header>

<div class="container">
    <div class="calculadora">
        <div class="section">
            <h3>1. Valor Base</h3>
            <input type="text" id="valorBase" placeholder="0" oninput="mascaraNumeroLimpo(this)">
        </div>

        <div class="section">
            <h3>üöò 2. Servi√ßos</h3>
            <div class="item-linha">
                <span>Reparo Interno <span class="label-preco">R$ 5.000,00</span></span>
                <input type="checkbox" class="servico-check" data-preco="5000" onclick="calcular()">
            </div>
            <div class="item-linha">
                <span>Troca de Pneus <span class="label-preco">R$ 1.000,00/un</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyTrocaPneu', -1)">-</button>
                    <input type="number" id="qtyTrocaPneu" class="qty-val" value="0" min="0" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyTrocaPneu', 1)">+</button>
                </div>
            </div>
            <div class="item-linha">
                <span>Reparo Sul <span class="label-preco">R$ 7.000,00</span></span>
                <input type="checkbox" class="servico-check" data-preco="7000" onclick="calcular()">
            </div>
            <div class="item-linha">
                <span>Reparo Norte <span class="label-preco">R$ 10.000,00</span></span>
                <input type="checkbox" class="servico-check" data-preco="10000" onclick="calcular()">
            </div>
        </div>

        <div class="section">
            <h3>üõí 3. Produtos</h3>
           
            <div class="item-linha">
                <span>Kit Reparo Comum <span class="label-preco">R$ 5.000,00</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyKitComum', -1)">-</button>
                    <input type="number" id="qtyKitComum" class="qty-val" value="0" min="0" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyKitComum', 1)">+</button>
                </div>
            </div>
            <div class="item-linha">
                <span>Kit Avan√ßado <span class="label-preco">R$ 10.000,00</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyKitAvancado', -1)">-</button>
                    <input type="number" id="qtyKitAvancado" class="qty-val" value="0" min="0" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyKitAvancado', 1)">+</button>
                </div>
            </div>
            
            <div class="item-linha">
                <span>Pneu <span class="label-preco">R$ 1.000,00</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyPneu', -1)">-</button>
                    <input type="number" id="qtyPneu" class="qty-val" value="0" min="0" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyPneu', 1)">+</button>
                </div>
            </div>

            <div class="item-linha">
                <span>Chave Inglesa <span class="label-preco">R$ 10.000,00</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyChave', -1)">-</button>
                    <input type="number" id="qtyChave" class="qty-val" value="0" min="0" oninput="calcular()" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyChave', 1)">+</button>
                </div>
            </div>
            <div class="item-linha">
                <span>Macaco Hidr√°ulico <span class="label-preco">R$ 10.000,00</span></span>
                <div class="controles">
                    <button class="btn-qty" onclick="alterarQty('qtyMacaco', -1)">-</button>
                    <input type="number" id="qtyMacaco" class="qty-val" value="0" min="0" oninput="calcular()">
                    <button class="btn-qty plus" onclick="alterarQty('qtyMacaco', 1)">+</button>
                </div>
            </div>
        </div>
    </div>

    <div class="resumo">
        <h3>Resumo do Or√ßamento</h3>
        <div class="resumo-item">
            <span>Valor Base:</span>
            <span id="resBase">R$ 0,00</span>
        </div>
        
        <div class="resumo-item" id="linhaAcrescimo" style="display: none; color: var(--primary);">
            <span id="labelAcrescimo">Acr√©scimo (0%):</span>
            <span id="resAcrescimo">R$ 0,00</span>
        </div>

        <div class="resumo-item">
            <span>Servi√ßos:</span>
            <span id="resServicos">R$ 0,00</span>
        </div>
        <div class="resumo-item">
            <span>Produtos:</span>
            <span id="resProdutos">R$ 0,00</span>
        </div>

        <button id="btnParceria" class="btn-parceria" onclick="toggleParceria()">Ativar Parceria</button>
         <p style="font-size: 0.7rem; color: var(--text-dim); line-height: 1.4;">
            Ativar a Parceria: Acr√©scimo de 15% no valor base + R$ 2.000 de desconto em todos os servi√ßos e produtos.
        </p>
        
        <h3 style="margin-top: 20px; font-size: 0.8rem;">Acr√©scimo (apenas valor base):</h3>
        <div class="promo-tags">
            <div class="tag" id="tag15" onclick="setAcrescimo(0.15)">PROMO 15%</div>
            <div class="tag" id="tag25" onclick="setAcrescimo(0.25)">25%</div>
        </div>

        <div class="total-label" style="margin-top:20px; font-weight:bold;">Total:</div>
        <div class="total-valor" id="totalFinal">R$ 0,00</div>
    </div>
</div>

<footer>
    <p>Projeto Exclusivo &copy; 2026 | Desenvolvido com muita dedica√ß√£o por 
       <span class="dev-name">Reginaldo Souza</span>
    </p>
</footer>

<script>
    let parceriaAtiva = false;
    let percentualAcrescimoExtra = 0;

    function mascaraNumeroLimpo(input) {
        input.value = input.value.replace(/\D/g, "");
        calcular();
    }

    function converterParaNumero(string) {
        if (!string) return 0;
        return parseInt(string.replace(/\D/g, "")) || 0;
    }

    function formatarMoeda(valor) {
        return valor.toLocaleString("pt-BR", { style: "currency", currency: "BRL" });
    }

    /*function alterarQty(id, delta) {
        const input = document.getElementById(id);
        let novoValor = parseInt(input.value) + delta;
        if (novoValor < 0) novoValor = 0;
        input.value = novoValor;
        calcular();
    }*/

    function alterarQty(id, delta) {
    const input = document.getElementById(id);
    
    // O '|| 0' evita o NaN se o campo estiver vazio ou com texto
    let valorAtual = parseInt(input.value) || 0; 
    
    let novoValor = valorAtual + delta;
    
    // Impede que a quantidade seja menor que zero
    if (novoValor < 0) {
        novoValor = 0;
    }
    
    input.value = novoValor;
    
    // Executa a fun√ß√£o de c√°lculo que atualiza os totais na tela
    calcular();
}

    function toggleParceria() {
        parceriaAtiva = !parceriaAtiva;
        document.getElementById('btnParceria').classList.toggle('active', parceriaAtiva);
        document.getElementById('btnParceria').innerText = parceriaAtiva ? "Parceria Ativa" : "Ativar Parceria";
        calcular();
    }

    function setAcrescimo(valor) {
        percentualAcrescimoExtra = (percentualAcrescimoExtra === valor) ? 0 : valor;
        document.getElementById('tag15').classList.toggle('active', percentualAcrescimoExtra === 0.15);
        document.getElementById('tag25').classList.toggle('active', percentualAcrescimoExtra === 0.25);
        calcular();
    }

    function calcular() {
    let baseOriginal = converterParaNumero(document.getElementById('valorBase').value);
    let baseParaCalculo = baseOriginal;
    if (parceriaAtiva) baseParaCalculo *= 1.15;

    let valorAcrescimo = baseOriginal * percentualAcrescimoExtra;
    const linha = document.getElementById('linhaAcrescimo');
    if (valorAcrescimo > 0) {
        linha.style.display = 'flex';
        document.getElementById('labelAcrescimo').innerText = `Acr√©scimo (${percentualAcrescimoExtra * 100}%):`;
        document.getElementById('resAcrescimo').innerText = formatarMoeda(valorAcrescimo);
    } else {
        linha.style.display = 'none';
    }

    let totalServicos = 0;
    document.querySelectorAll('.servico-check:checked').forEach(el => {
        totalServicos += parseFloat(el.dataset.preco) || 0;
    });

    // CORRE√á√ÉO AQUI: Adicionado "|| 0" em todos os campos para evitar NaN ao apagar
    totalServicos += (parseInt(document.getElementById('qtyTrocaPneu').value) || 0) * 1000;

    let totalProdutos = ((parseInt(document.getElementById('qtyPneu').value) || 0) * 1000) +
                        ((parseInt(document.getElementById('qtyKitComum').value) || 0) * 5000) +
                        ((parseInt(document.getElementById('qtyKitAvancado').value) || 0) * 10000) +
                        ((parseInt(document.getElementById('qtyChave').value) || 0) * 10000) +
                        ((parseInt(document.getElementById('qtyMacaco').value) || 0) * 10000);

    let subtotalItens = totalServicos + totalProdutos;
    if (parceriaAtiva && subtotalItens > 0) {
        subtotalItens = Math.max(0, subtotalItens - 2000);
    }

    let totalFinal = baseParaCalculo + valorAcrescimo + subtotalItens;

    document.getElementById('resBase').innerText = formatarMoeda(baseParaCalculo);
    document.getElementById('resServicos').innerText = formatarMoeda(totalServicos);
    document.getElementById('resProdutos').innerText = formatarMoeda(totalProdutos);
    document.getElementById('totalFinal').innerText = formatarMoeda(totalFinal);
}
   
</script>
</body>
</html>